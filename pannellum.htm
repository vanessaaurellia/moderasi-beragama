<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Moderasi Beragama</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
        <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
        <link rel="stylesheet" href="pannellum.css">
    </head>

    <body>
        <div id="panorama" class="content"></div>
        <div class="dropdown">
            <button onclick="myFunction()" class="dropbtn">Moderasi Beragama <img class="icon" src="images/arrow.svg"></button>
            <div id="myDropdown" class="dropdown-content">
              <a class="link" onclick="openHouse(event, 'masjid')" id="defaultOpen">Masjid</a>
              <a class="link" onclick="openHouse(event, 'katolik')">Gereja Katolik</a>
              <a class="link" onclick="openHouse(event, 'kristen')">Gereja Kristen Protestan</a>
              <a class="link" onclick="openHouse(event, 'pura')">Pura</a>
              <a class="link" onclick="openHouse(event, 'wihara')">Wihara</a>
              <a class="link" onclick="openHouse(event, 'konghucu')">Konghucu</a>
              <a class="link" onclick="openHouse(event, 'kepercayaan')">Penganut Kepercayaan</a>
            </div>
        </div>
        
        <script>
            function showPannellum(imageOutside, imageInside, pitch1, pitch2, yaw1, yaw2, houseName){
                pannellum.viewer('panorama', {   
                    "default": {
                        "firstScene": "outside",
                        "sceneFadeDuration": 1000,
                        "autoLoad": true,
                        "compass": false,
                        "autoRotate": -2
                    },

                    "scenes": {
                        "outside": {
                            "type": "equirectangular",
                            "panorama": imageOutside,
                            "hotSpots": [
                                {
                                    "pitch": pitch1,
                                    "yaw": yaw1,
                                    "type": "scene",
                                    "sceneId": "inside"
                                }
                            ]
                        },

                        "inside": {
                            "type": "equirectangular",
                            "panorama": imageInside,
                            "hotSpots": [
                                {
                                    "pitch": pitch2,
                                    "yaw": yaw2,
                                    "type": "scene",
                                    "sceneId": "outside"
                                }
                            ]
                        }
                    }
                });
            }

            function myFunction() {
                document.getElementById("myDropdown").classList.toggle("show");
            }

            window.onclick = function(event) {
                if (!event.target.matches('.dropbtn')) {
                    var dropdowns = document.getElementsByClassName("dropdown-content");
                    var i;
                    for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            }
            var houseName = "mesjid"
            var imageOutside = "https://pannellum.org/images/alma.jpg";
            var imageInside = "https://pannellum.org/images/jfk.jpg";
            var pitch1 = -8;
            var pitch2 = -6.8;
            var yaw1 = -10;
            var yaw2 = 62;

            function openHouse(event, houseName) {
                var i, content, link;
                content = document.getElementsByClassName("content");
                for (i = 0; i < content.length; i++) {
                    content[i].style.display = "none";
                }
                link = document.getElementsByClassName("link");
                for (i = 0; i < link.length; i++) {
                    link[i].className = link[i].className.replace(" active", "");
                }
                document.getElementById("panorama").style.display = "block";
                event.currentTarget.className += " active";

                if (houseName == "masjid"){ 
                    imageOutside = "/images/masjid1.JPG";
                    imageInside = "/images/masjid2.JPG";
                    pitch1 = -8;
                    pitch2 = -6.8;
                    yaw1 = -10;
                    yaw2 = 62;
                    $('#panorama').html('');
                    showPannellum(imageOutside, imageInside, pitch1, pitch2, yaw1, yaw2, houseName);
                }
                else if (houseName == "katolik"){ 
                    imageOutside = "/images/katolik1.JPG";
                    imageInside = "/images/katolik2.JPG";
                    pitch1 = -8;
                    pitch2 = -6.8;
                    yaw1 = 0;
                    yaw2 = -2;
                    $('#panorama').html('');
                    showPannellum(imageOutside, imageInside, pitch1, pitch2, yaw1, yaw2, houseName);
                }
                else if (houseName == "kristen"){ 
                    $('#panorama').html('');
                    pannellum.viewer('panorama', {
                        "autoLoad": true,
                        "compass": false,
                        "autoRotate": -2,
                        "type": "equirectangular",
                        "panorama": "/images/kristen.JPG"
                    });
                }
                else if (houseName == "pura"){ 
                    imageOutside = "/images/pura1.JPG";
                    imageInside = "/images/pura2.JPG";
                    pitch1 = -18;
                    pitch2 = -18;
                    yaw1 = 205;
                    yaw2 = -65;
                    $('#panorama').html('');
                    showPannellum(imageOutside, imageInside, pitch1, pitch2, yaw1, yaw2, houseName);
                }
                else if (houseName == "wihara"){ 
                    imageOutside = "/images/wihara1.JPG";
                    imageInside = "/images/wihara2.JPG";
                    pitch1 = -11.5;
                    pitch2 = -40;
                    yaw1 = 178;
                    yaw2 = 0;
                    $('#panorama').html('');
                    showPannellum(imageOutside, imageInside, pitch1, pitch2, yaw1, yaw2, houseName);
                }
                else if (houseName == "konghucu"){ 
                    $('#panorama').html('');
                    pannellum.viewer('panorama', {   
                        "default": {
                            "firstScene": "outside",
                            "sceneFadeDuration": 1000,
                            "autoLoad": true,
                            "compass": false,
                            "autoRotate": -2
                        },

                        "scenes": {
                            "outside": {
                                "type": "equirectangular",
                                "panorama": "/images/konghucu1.JPG",
                                "hotSpots": [
                                    {
                                        "pitch": -23,
                                        "yaw": -165,
                                        "type": "scene",
                                        "sceneId": "inside"
                                    }
                                ]
                            },

                            "inside": {
                                "type": "equirectangular",
                                "panorama": "/images/konghucu2.JPG",
                                "hotSpots": [
                                    {
                                        "pitch": 12,
                                        "yaw": 178,
                                        "type": "scene",
                                        "sceneId": "other"
                                    }
                                ]
                            },

                            "other": {
                                "type": "equirectangular",
                                "panorama": "/images/konghucu3.JPG",
                                "hotSpots": [
                                    {
                                        "pitch": -6.8,
                                        "yaw": 62,
                                        "type": "scene",
                                        "sceneId": "inside"
                                    }
                                ]
                            }
                        }
                    });
                }
                else if (houseName == "kepercayaan"){ 
                    $('#panorama').html('');
                    pannellum.viewer('panorama', {
                        "autoLoad": true,
                        "compass": false,
                        "autoRotate": -2,
                        "type": "equirectangular",
                        "panorama": "/images/kepercayaan.JPG"
                    });
                }
            }

            document.getElementById("defaultOpen").click();
        </script>
    </body>
</html>
